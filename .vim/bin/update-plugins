#!/bin/bash -e
#
# Updates all Vim plugins to the latest version
#

cd ~/.vim

# Update all plugins
for plugin in pathogen bundle/*; do
    echo;echo "Updating $plugin..."
    ( cd "$plugin" && git checkout master && git pull && git submodule update )
done

# Recompile xkb-switch library
if [ "$(uname)" != "Darwin" ]; then
    echo;echo "Compile xkb-switch..."
    (cd "bundle/xkb-switch" && cmake . && make && mv libxkbswitch.so ~/.vim && git clean -df)
fi
